@namespace RepositoryFramework.Web.Components.Standard
@using Microsoft.JSInterop;
@using Radzen;
@using Radzen.Blazor

<RadzenButton Click="() => CopyAsync()" Icon="file_copy" />

@code {
    [Inject]
    public IJSRuntime JsInterop { get; set; }
    [Inject]
    public NotificationService NotificationService { get; set; }

    [Parameter]
    public Func<string> ValueToCopy { get; set; }
    private const string Copied = nameof(Copied);
    private const string WithSuccess = "with success.";
    private async ValueTask CopyAsync()
    {
        await JsInterop.InvokeVoidAsync("navigator.clipboard.writeText", ValueToCopy.Invoke()).NoContext();
        NotificationService.Notify(new Radzen.NotificationMessage
            {
                Duration = 4,
                CloseOnClick = true,
                Severity = Radzen.NotificationSeverity.Success,
                Summary = Copied,
                Detail = WithSuccess
            });
    }
}
