@namespace RepositoryFramework.Web.Components.Standard
@using System.Reflection;
@using Blazorise
@using System.Collections;
@using System.Text.Json;
@using Blazorise.DataGrid
@using System.Linq.Expressions;


<Field ColumnSize="ColumnSize.IsHalf">
    <FieldLabel>@Name</FieldLabel>
    <FieldBody>
        @if (Value is bool booleanValue)
        {
            <Check TValue="bool" Checked="booleanValue" CheckedChanged="x => Update(x)">
                @Name
            </Check>
        }
        else if (Value is DateTime dateTime)
        {
            <DatePicker TValue="DateTime?" Date="dateTime" DateChanged="x => Update(x)" />
        }
        else
        {
            <TextEdit Text="@Value?.ToString()" TextChanged="x => Update(x)">
            </TextEdit>
        }
    </FieldBody>
</Field>


@code {
    [Parameter]
    public string Name { get; set; }
    [Parameter]
    public object? Value { get; set; }
    [Parameter]
    public Action<object> Updatable { get; set; }
    public void Update(object? value)
    {
        Updatable(value);
    }
}