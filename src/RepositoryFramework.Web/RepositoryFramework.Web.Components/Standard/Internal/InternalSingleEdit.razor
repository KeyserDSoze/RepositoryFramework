@namespace RepositoryFramework.Web.Components.Standard
@using System.Reflection;
@using Blazorise
@using System.Collections;
@using System.Text.Json;
@using Blazorise.DataGrid
@using System.Linq.Expressions;

@if (Property != null)
{
    var value = Property.Value(Context);
    <Field ColumnSize="ColumnSize.IsHalf">
        <FieldLabel>@Property.Self.Name</FieldLabel>
        <FieldBody>
            @if (value is bool booleanValue)
            {
                <Check TValue="bool" Checked="booleanValue" CheckedChanged="x => Update(x)">
                    @Property.Self.Name
                </Check>
            }
            else if (value is DateTime dateTime)
            {
                <DatePicker TValue="DateTime?" Date="dateTime" DateChanged="x => Update(x)" />
            }
           @* else if (value.IsNumeric())
            {
                @LoadNumeric(value)
            }*@
            else
            {
                <TextEdit Text="@value?.ToString()" TextChanged="x => Update(x)">
                </TextEdit>
            }
        </FieldBody>
    </Field>
}

@code {
    [Parameter]
    public BaseProperty Property { get; set; }
    [Parameter]
    public object Context { get; set; }
    public void Update(object? value)
    {
        Property.Set(Context, value);
    }
}