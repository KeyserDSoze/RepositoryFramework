@namespace RepositoryFramework.Web.Components.Standard
@using System.Reflection;
@using Blazorise
@using System.Collections;
@using System.Text.Json;
@using Blazorise.DataGrid
@typeparam T

@if (Entity != null)
{
    <Row>
        <Column>
            @while (Enumerator.MoveNext())
            {
                var value = Enumerator.Current;
                if (value.Type == PropertyType.Primitive)
                {
                    if (Enumerator.MoveNext())
                    {
                        var nextValue = Enumerator.Current;
                        if (nextValue.Type == PropertyType.Primitive)
                        {
                            <Fields>
                                <InternalSingleEdit Property="value" Context="Entity"></InternalSingleEdit>
                                <InternalSingleEdit Property="nextValue" Context="Entity"></InternalSingleEdit>
                            </Fields>
                        }
                        else
                        {
                            <Fields>
                                <InternalSingleEdit Property="value" Context="Entity"></InternalSingleEdit>
                            </Fields>
                            <Divider DividerType="DividerType.TextContent" Text="@value.Self.Name" />
                            @LoadNext(value)
                        }
                    }
                    else
                    {
                        <Fields>
                            <InternalSingleEdit Property="value" Context="Entity"></InternalSingleEdit>
                        </Fields>
                        break;
                    }
                }
                else
                {
                    <Divider DividerType="DividerType.TextContent" Text="@value.Self.Name" />
                    @LoadNext(value)
                }
            }
        </Column>
    </Row>
}